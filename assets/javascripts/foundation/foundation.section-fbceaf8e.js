!function(e,t,n){"use strict";Foundation.libs.section={name:"section",version:"4.3.2",settings:{deep_linking:!1,one_up:!0,multi_expand:!1,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",callback:function(){}},init:function(t,n,r){var i=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof n&&e.extend(!0,i.settings,n),"string"!=typeof n?(this.events(),!0):this[n].call(this,r)},events:function(){for(var r=this,i=[],o=r.settings.section_selector,s=r.settings.region_selector.split(","),a=r.settings.title_selector.split(","),u=0,c=s.length;c>u;u++)for(var l=s[u],f=0,d=a.length;d>f;f++){var p=o+">"+l+">"+a[f];i.push(p+" a"),i.push(p)}e(r.scope).on("click.fndtn.section",i.join(","),function(t){var n=e(this).closest(r.settings.title_selector);r.close_navs(n),n.siblings(r.settings.content_selector).length>0&&r.toggle_active.call(n[0],t)}),e(t).on("resize.fndtn.section",r.throttle(function(){r.resize()},30)).on("hashchange.fndtn.section",r.set_active_from_hash),e(n).on("click.fndtn.section",function(t){t.isPropagationStopped&&t.isPropagationStopped()||t.target!==n&&r.close_navs(e(t.target).closest(r.settings.title_selector))}),e(t).triggerHandler("resize.fndtn.section"),e(t).triggerHandler("hashchange.fndtn.section")},close_navs:function(t){var n=Foundation.libs.section,r=e(n.settings.nav_selector).filter(function(){return!e.extend({},n.settings,n.data_options(e(this))).one_up});if(t.length>0){var i=t.parent().parent();(n.is_horizontal_nav(i)||n.is_vertical_nav(i))&&(r=r.filter(function(){return this!==i[0]}))}r.children(n.settings.region_selector).removeClass(n.settings.active_class)},toggle_active:function(t){var n=e(this),r=Foundation.libs.section,i=n.parent(),o=n.siblings(r.settings.content_selector),s=i.parent(),a=e.extend({},r.settings,r.data_options(s)),u=s.children(r.settings.region_selector).filter("."+r.settings.active_class);!a.deep_linking&&o.length>0&&t.preventDefault(),t.stopPropagation(),i.hasClass(r.settings.active_class)?(i.hasClass(r.settings.active_class)&&r.is_accordion(s)||!a.one_up&&(r.small(s)||r.is_vertical_nav(s)||r.is_horizontal_nav(s)||r.is_accordion(s)))&&(i.removeClass(r.settings.active_class),i.trigger("closed.fndtn.section")):((!r.is_accordion(s)||r.is_accordion(s)&&!r.settings.multi_expand)&&(u.removeClass(r.settings.active_class),u.trigger("closed.fndtn.section")),i.addClass(r.settings.active_class),r.resize(i.find(r.settings.section_selector).not("["+r.settings.resized_data_attr+"]"),!0),i.trigger("opened.fndtn.section")),a.callback(s)},check_resize_timer:null,resize:function(t,n){var r=Foundation.libs.section,i=e(r.settings.section_selector),o=r.small(i),s=function(e,t){return!(r.is_accordion(e)||e.is("["+r.settings.resized_data_attr+"]")||o&&!r.is_horizontal_tabs(e)||t!==("none"===e.css("display")||!e.parent().is(":visible")))};t=t||e(r.settings.section_selector),clearTimeout(r.check_resize_timer),o||t.removeAttr(r.settings.small_style_data_attr),t.filter(function(){return s(e(this),!1)}).each(function(){var t=e(this),i=t.children(r.settings.region_selector),o=i.children(r.settings.title_selector),s=i.children(r.settings.content_selector),a=0;if(n&&0==t.children(r.settings.region_selector).filter("."+r.settings.active_class).length){var u=e.extend({},r.settings,r.data_options(t));u.deep_linking||!u.one_up&&(r.is_horizontal_nav(t)||r.is_vertical_nav(t)||r.is_accordion(t))||i.filter(":visible").first().addClass(r.settings.active_class)}if(r.is_horizontal_tabs(t)||r.is_auto(t)){var c=0;o.each(function(){var t=e(this);if(t.is(":visible")){t.css(r.rtl?"right":"left",c);var n=parseInt(t.css("border-"+(r.rtl?"left":"right")+"-width"),10);"Nan"===n.toString()&&(n=0),c+=r.outerWidth(t)-n,a=Math.max(a,r.outerHeight(t))}}),o.css("height",a),i.each(function(){var t=e(this),n=t.children(r.settings.content_selector),i=parseInt(n.css("border-top-width"),10);"Nan"===i.toString()&&(i=0),t.css("padding-top",a-i)}),t.css("min-height",a)}else if(r.is_horizontal_nav(t)){var l=!0;o.each(function(){a=Math.max(a,r.outerHeight(e(this)))}),i.each(function(){var n=e(this);n.css("margin-left","-"+(l?t:n.children(r.settings.title_selector)).css("border-left-width")),l=!1}),i.css("margin-top","-"+t.css("border-top-width")),o.css("height",a),s.css("top",a),t.css("min-height",a)}else if(r.is_vertical_tabs(t)){var f=0;o.each(function(){var t=e(this);if(t.is(":visible")){t.css("top",f);var n=parseInt(t.css("border-top-width"),10);"Nan"===n.toString()&&(n=0),f+=r.outerHeight(t)-n}}),s.css("min-height",f+1)}else if(r.is_vertical_nav(t)){var d=0,p=!0;o.each(function(){d=Math.max(d,r.outerWidth(e(this)))}),i.each(function(){var n=e(this);n.css("margin-top","-"+(p?t:n.children(r.settings.title_selector)).css("border-top-width")),p=!1}),o.css("width",d),s.css(r.rtl?"right":"left",d),t.css("width",d)}t.attr(r.settings.resized_data_attr,!0)}),e(r.settings.section_selector).filter(function(){return s(e(this),!0)}).length>0&&(r.check_resize_timer=setTimeout(function(){r.resize(t.filter(function(){return s(e(this),!1)}),!0)},700)),o&&t.attr(r.settings.small_style_data_attr,!0)},is_vertical_nav:function(e){return/vertical-nav/i.test(e.data("section"))},is_horizontal_nav:function(e){return/horizontal-nav/i.test(e.data("section"))},is_accordion:function(e){return/accordion/i.test(e.data("section"))},is_horizontal_tabs:function(e){return/^tabs$/i.test(e.data("section"))},is_vertical_tabs:function(e){return/vertical-tabs/i.test(e.data("section"))},is_auto:function(e){var t=e.data("section");return""===t||/auto/i.test(t)},set_active_from_hash:function(){var n,r=Foundation.libs.section,i=t.location.hash.substring(1),o=e(r.settings.section_selector);o.each(function(){var t=e(this),o=t.children(r.settings.region_selector);return o.each(function(){var o=e(this),s="^"+o.children(r.settings.content_selector).data("slug")+"$";return new RegExp(s,"i").test(i)?(n=t,!1):void 0}),null!=n?!1:void 0}),null!=n&&o.each(function(){if(n==e(this)){var t=e(this),o=e.extend({},r.settings,r.data_options(t)),s=t.children(r.settings.region_selector),a=o.deep_linking&&i.length>0,u=!1;s.each(function(){var t=e(this);if(u)t.removeClass(r.settings.active_class);else if(a){var n="^"+t.children(r.settings.content_selector).data("slug")+"$";n&&new RegExp(n,"i").test(i)?(t.hasClass(r.settings.active_class)||t.addClass(r.settings.active_class),u=!0):t.removeClass(r.settings.active_class)}else t.hasClass(r.settings.active_class)&&(u=!0)}),u||!o.one_up&&(r.is_horizontal_nav(t)||r.is_vertical_nav(t)||r.is_accordion(t))||s.filter(":visible").first().addClass(r.settings.active_class)}})},reflow:function(){var t=Foundation.libs.section;e(t.settings.section_selector).removeAttr(t.settings.resized_data_attr),t.throttle(function(){t.resize()},30)()},small:function(t){return e.extend({},this.settings,this.data_options(t)),this.is_horizontal_tabs(t)?!1:t&&this.is_accordion(t)?!0:e("html").hasClass("lt-ie9")?!0:e("html").hasClass("ie8compat")?!0:!matchMedia(Foundation.media_queries.small).matches},off:function(){e(this.scope).off(".fndtn.section"),e(t).off(".fndtn.section"),e(n).off(".fndtn.section")}},e.fn.reflow_section=function(e){var t=this,n=Foundation.libs.section;return t.removeAttr(n.settings.resized_data_attr),n.throttle(function(){n.resize(t,e)},30)(),this}}(Foundation.zj,window,document);